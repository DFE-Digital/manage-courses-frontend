<%= content_for :page_title, subject_page_title(@course) %>
<% content_for :before_content do %>
  <%= govuk_back_link_to(@back_link_path) %>
<% end %>
<%= render 'shared/errors' %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= form_with url: continue_provider_recruitment_cycle_courses_subjects_path(
                    @provider.provider_code,
                    @provider.recruitment_cycle_year
                  ),
                  method: :get do |form| %>
      <% if @course[:meta][:edit_options][:modern_language_subject][:id].to_s.in?(params.dig("course", "subjects_ids") || [])%>
          <%= hidden_field(:previous, :modern_language_subject_id, value: @course[:meta][:edit_options][:modern_language_subject][:id]) %>
        <% params["course"]["subjects_ids"].each do |array_value| %>
          <%= hidden_field(:previous, :subjects_ids, multiple: true, value: array_value) %>
        <% end %>
      <% end %>
      <%= render "courses/new_fields_holder", form: form, except_keys: [] do |fields| %>
        <%= render 'form_fields', form: fields %>

        <div data-qa="course__google_form_link" >
          <% if !current_user["admin"] && @course.level == "secondary" %>
            <h2 class="govuk-heading-m"> Adding a Physical education course?<h2/>
            <p class="govuk-body-s">Youâ€™ll need to fill in a
              <%= link_to "separate Google Form", add_course_url(current_user['info']['email'], @provider, is_current_cycle: true), class: "govuk-link", rel: "noopener noreferrer", target: "_blank" %>,
            as PE places are limited.</p>
          <% end %>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
