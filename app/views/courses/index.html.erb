<%= content_for :page_title, "Courses" %>

<% content_for :before_content do %>
  <nav class="govuk-breadcrumbs">
    <ol class="govuk-breadcrumbs__list">
      <% if @has_multiple_providers then %>
        <li class="govuk-breadcrumbs__list-item">
          <%= link_to "Organisations", providers_path, class: "govuk-breadcrumbs__link" %>
        </li>
      <% end %>
      <li class="govuk-breadcrumbs__list-item">
        <%= link_to @provider[:provider_name], provider_path(code: @provider[:provider_code]), class: "govuk-breadcrumbs__link" %>
      </li>
      <li class="govuk-breadcrumbs__list-item" aria-current="page">
        Courses
      </li>
    </ol>
  </nav>
<% end %>

<h1 class="govuk-heading-xl">
  <% if rollover? %>
   <span class="govuk-caption-xl"><%= recruitment_cycle_title %></span>
  <% end %>
  Courses
</h1>
<p class="govuk-body">Use this section to:</p>

<ul class="govuk-list govuk-list--bullet govuk-!-margin-bottom-7">
  <li>write about each course</li>
  <li>preview and publish courses</li>
  <li>assign locations to a course</li>
  <li>copy content between courses</li>
</ul>

<% if @provider.courses.count > 10 %>
  <%= add_course_link(current_user['info']['email'], @provider) %>
  <p class="govuk-body-s govuk-!-margin-bottom-6">You’ll be taken to a Google Form to fill in your course details.</p>
<% end %>

<% if @self_accredited_courses %>
  <section data-qa="courses__table-section">
    <%= render partial: 'course_table', locals: { courses: @self_accredited_courses } %>
  </section>
<% end %>

<% @courses_by_accrediting_provider.each do |accrediting_provider, courses| %>
  <section data-qa="courses__table-section">
    <h2 class="govuk-heading-m">
      <span class="govuk-caption-m">Accredited body</span>
      <%= accrediting_provider %>
    </h2>

    <%= render partial: 'course_table', locals: { courses: courses } %>
  </section>
<% end %>

<%= add_course_link(current_user['info']['email'], @provider) %>
<p class="govuk-body-s">You’ll be taken to a Google Form to fill in your course details.</p>
