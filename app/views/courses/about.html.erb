<%= content_for :page_title, "#{course.name_and_code} - Courses" %>

<% content_for :before_content do %>
  <%= govuk_back_link_to(provider_course_path(course.provider.provider_code, course.course_code)) %>
<% end %>

<% if params[:copy_from].present? %>
  <div class="govuk-warning-summary" aria-labelledby="warning-summary-heading" tabindex="-1" data-module="error-summary" data-copy-course="warning" role="alert">
    <h2 class="govuk-heading govuk-warning-summary__title" id="warning-summary-heading">
      Your changes are not yet saved
    </h2>
    <div class="govuk-warning-summary__body">
      <p class="govuk-body">
        We’ve copied these fields from <%= @source_course.name %> (<%= @source_course.course_code %>):
      </p>
      <ul class="govuk-list">
        <li><%= link_to 'About the course', '#about_course_wrapper', class: 'govuk-link' %></li>
        <li><%= link_to 'Interview process', '#interview_process_wrapper', class: 'govuk-link' %></li>
        <li><%= link_to 'How school placements work', '#how_school_placements_work_wrapper', class: 'govuk-link' %></li>
      </ul>
      <p class="govuk-body">
        Please check them and make your changes before saving.
      </p>
    </div>
  </div>
<% end %>

<h1 class="govuk-heading-xl">
  <span class="govuk-caption-xl"><%= course.name_and_code %></span>
  About this course
</h1>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= form_for course, url: publish_provider_course_path(course.provider.provider_code, course.course_code), method: :post do |f| %>
      <p class="govuk-body">Give applicants a short description of the course.</p>

      <p class="govuk-body">You could include:</p>
      <ul class="govuk-list govuk-list--bullet">
        <li>an overview of what candidates are taught</li>
        <li>how much time they’ll spend training in school</li>
        <li>how they’ll be assessed</li>
        <li>the workload (eg how many essays per term?)</li>
        <li>any other locations they’ll need to go to (eg will they also have to attend classes at an accredited body?)</li>
        <li>information about the prestige of the course (eg league-table rankings)</li>
      </ul>

      <p class="govuk-body">If you offer different courses in the same subject, be clear about how this course differs from the others (eg amount of time spent in school, course structure). This will help the applicant decide which course best suits them.</p>

      <div id="about_course_wrapper" class="govuk-character-count" data-module="character-count" data-maxwords="400">
        <div class="govuk-form-group">
          <%= f.label :about_course, 'About this course', class: 'govuk-label govuk-label--s' %>
          <%= f.text_area :about_course, rows: 15, class: 'govuk-textarea js-character-count' %>
        </div>
      </div>

      <hr class="govuk-section-break govuk-section-break--visible govuk-section-break--xl">

      <h3 class="govuk-heading-l remove-top-margin">Interview process</h3>

      <p class="govuk-body">Give applicants a summary of the interview process.</p>

      <p class="govuk-body">This could include:</p>
      <ul class="govuk-list govuk-list--bullet">
        <li>who’ll be interviewing them</li>
        <li>how many interviews they’ll need to attend</li>
        <li>details of any tests they’ll need to sit</li>
      </ul>

      <div id="interview_process_wrapper" class="govuk-character-count" data-module="character-count" data-maxwords="250">
        <div class="govuk-form-group">
          <%= f.label :interview_process, 'Interview process (optional)', class: 'govuk-label govuk-label--s' %>
          <%= f.text_area :interview_process, rows: 10, class: 'govuk-textarea js-character-count' %>
        </div>
      </div>

      <hr class="govuk-section-break govuk-section-break--visible govuk-section-break--xl">

      <h3 class="govuk-heading-l remove-top-margin">How school placements work</h3>

      <p class="govuk-body">Tell applicants more about the schools they’ll be teaching in.</p>

      <p class="govuk-body">You could include:</p>
      <ul class="govuk-list govuk-list--bullet">
        <li>how the candidate’s schools are selected</li>
        <li>the average distance candidates have to travel from home to school</li>
        <li>the age ranges they’ll be teaching (eg 11 to 16 or 11 to 18)</li>
        <li>how many schools you partner with in total</li>
        <li>the number of placements a candidate will have</li>
        <li>how much time candidates spend in each school</li>
      </ul>

      <div id="how_school_placements_work_wrapper" class="govuk-character-count" data-module="character-count" data-maxwords="350">
        <div class="govuk-form-group">
          <%= f.label :how_school_placements_work, 'How school placements work', class: 'govuk-label govuk-label--s' %>
          <%= f.text_area :how_school_placements_work, rows: 10, class: 'govuk-textarea js-character-count' %>
        </div>
      </div>

      <%= f.submit "Save", class: "govuk-button", data: { qa: 'course__save' } %>

      <p class="govuk-body">
        <%= link_to 'Cancel changes', provider_course_path(course.provider.provider_code, course.course_code), class: "govuk-link" %>
      </p>
    <% end %>
  </div>

  <div class="govuk-grid-column-one-third">
    <%= render partial: 'courses/related_sidebar',
                        locals: {
                          course: course,
                          page_path: about_provider_course_path(course.provider.provider_code, course.course_code) } %>
  </div>
</div>
